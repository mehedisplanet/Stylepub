{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block title %}
<title>Product Details</title>
{% endblock title %}
{% block content %}


<section class="py-5">
  <div class="container">
    <div class="row gx-5">
      <aside class="col-lg-6">
        <div class="border rounded-4 mb-3 d-flex justify-content-center">
          <a data-fslightbox="mygalley" class="rounded-4" target="_blank" data-type="image" href="{{product.image.url}}">
            <img style="max-width: 100%; max-height: 100vh; margin: auto;" class="rounded-4 fit" src="{{product.image.url}}" />
          </a>
        </div>
        <div class="d-flex justify-content-center mb-3">
          <a data-fslightbox="mygalley" class="border mx-1 rounded-2" target="_blank" data-type="image" href="{{product.image.url}}" class="item-thumb">
            <img width="60" height="60" class="rounded-2" src="{{product.image.url}}" />
          </a>
          <a data-fslightbox="mygalley" class="border mx-1 rounded-2" target="_blank" data-type="image" href="{{product.image.url}}" class="item-thumb">
            <img width="60" height="60" class="rounded-2" src="{{product.image.url}}" />
          </a>
          <a data-fslightbox="mygalley" class="border mx-1 rounded-2" target="_blank" data-type="image" href="{{product.image.url}}" class="item-thumb">
            <img width="60" height="60" class="rounded-2" src="{{product.image.url}}" />
          </a>
          <a data-fslightbox="mygalley" class="border mx-1 rounded-2" target="_blank" data-type="image" href="{{product.image.url}}" class="item-thumb">
            <img width="60" height="60" class="rounded-2" src="{{product.image.url}}" />
          </a>
          <a data-fslightbox="mygalley" class="border mx-1 rounded-2" target="_blank" data-type="image" href="{{product.image.url}}" class="item-thumb">
            <img width="60" height="60" class="rounded-2" src="{{product.image.url}}" />
          </a>
        </div>
        <!-- thumbs-wrap.// -->
        <!-- gallery-wrap .end// -->
      </aside>
      <main class="col-lg-6">
        <div class="ps-lg-3">
          <h4 class="title text-dark">
            {{product.title}}
          </h4>
          <div class="d-flex flex-row my-3">
            <span class="text-success ms-2">In stock</span>
          </div>

          <div class="d-flex flex-row my-3">
            <div class="text-warning mb-1 me-2">
              <span class="ms-1">
                Total Review: {{ reviews | length }}
              </span>
            </div>
          </div>

          <div class="mb-3">
            <span class="h5">${{product.price}}</span>
          </div>

          <p>
            {{ product.description|wordwrap:10|safe }}
          </p>

          <div class="row">
            <dt class="col-3">Type:</dt>
            <dd class="col-9">Regular</dd>

            <dt class="col-3">Color</dt>
            <dd class="col-9">{{product.color}}</dd>

            <dt class="col-3">Material</dt>
            <dd class="col-9">Cotton</dd>

            <dt class="col-3">Brand</dt>
            <dd class="col-9">StylePub</dd>
          </div>

          <hr />

          <div class="row mb-4">
            <div class="col-md-4 col-6">
              <label class="mb-2">Size</label>
              <select class="form-select border border-secondary" style="height: 35px;">
                <option>{{product.size}}</option>
              </select>
            </div>
          </div>
          <a href="{% url 'purchase_product' product.id %}" class="btn btn-warning shadow-0"> Buy now </a>
          <a href="{% url 'wishlist_product' product.id %}" class="btn btn-primary shadow-0"> <i class="me-1 fa fa-shopping-basket"></i> Add to wishlist </a>
        </div>
      </main>
    </div>
  </div>
</section>














{% if reviews %}
  <div>
    <div class="card-body">
      {% for c in reviews %}
      <hr>
        <div class="card ">
          <div class="card-body">
            <div class="media">
              <div class="media-body">
                <h5 class="mt-0 text-lg font-bold">
                    <span class="opacity-50">By</span> {{ c.name }}
                </h5>            
                <b>{{ c.text }}</b>
                {% comment %} <p>{{ c.email }}</p> {% endcomment %}
                <p>{{ c.created_on }}</p>
                {% comment %} <p>{{ c.rating }}</p> {% endcomment %}
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}
<h5 class="card-body">Add Review Here</h5>
<form  method="POST" class="card-body">
    {% csrf_token %}
    {{ review_form | crispy }}
    <button class ="btn btn-success" type="submit">Submit</button>
</form>

{% endblock content %}